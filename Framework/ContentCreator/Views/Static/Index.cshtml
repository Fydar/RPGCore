<template class="task-template">
	<section id="static-section" class="section js-section u-category-communication">
		<p>Prototype Editor</p>

		<code id="async-msg">
			(None)
		</code>

		<input class="form-control" id="graphName" />

		<div class="graph" id="mainGraph">

		</div>

		<script>
			(function () {
				const { ipcRenderer } = require("electron");

				var obj;

				document.getElementById('graphName').addEventListener("input", doThing);

				function doThing() {
					obj.Name = this.value;
				}

				ipcRenderer.on('onReloadFile-reply', (event, arg) => {
					const message = arg;
					console.log(message);
					document.getElementById('async-msg').innerHTML = message;
					
					obj = JSON.parse(message);

					document.getElementById('graphName').value = obj.Name;
				});

				ipcRenderer.on('requestSave-reply', (event, arg) => {
					console.log(obj.Name);
					ipcRenderer.send('saveActiveDocument', JSON.stringify(obj));
				});
			}());
		</script>
	</section>
</template>
