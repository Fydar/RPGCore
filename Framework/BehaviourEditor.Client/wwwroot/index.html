<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>BehaviourEditor</title>
    <base href="/" />
    <link href="css/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <link href="css/site.css" rel="stylesheet" />
</head>
<body>
    <app>Loading...</app>

    <script src="_framework/blazor.webassembly.js"></script>

    <script>
        document.onmousedown = mouseDownHandler;

        function mouseDownHandler(event) {
            console.log(event.target.classList);
            if (!event.target.classList.contains("jsDraggable")) {
                return;
            }
			console.log(event.target);

			let shiftX = 0;
			let shiftY = 0;

            moveAt(event.pageX, event.pageY);

            function moveAt(pageX, pageY) {
				var destX = pageX - shiftX - event.target.parentNode.getBoundingClientRect().x;
				var destY = pageY - shiftY - event.target.parentNode.getBoundingClientRect().y;
                //var destX = pageX - shiftX;
                //var destY = pageY - shiftY;

                event.target.style.left = destX + 'px';
                event.target.style.top = destY + 'px';
            }

            function onMouseMove(event) {
                moveAt(event.pageX, event.pageY);
                console.log("Position " + event.pageX + ", " + event.pageY);
            }

            document.addEventListener('mousemove', onMouseMove);

            event.target.onmouseup = function () {
                console.log("Mouse Up");
                document.removeEventListener('mousemove', onMouseMove);
                event.target.onmouseup = null;
            };
        }

        document.ondragstart = dragStartHandler;

        function dragStartHandler(event) {
            if (!this.classList.contains("jsDraggable")) {
                return;
            }
            return false;
        }
    </script>
</body>
</html>
