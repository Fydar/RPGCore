<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>EntityComponentSystemSample </title>
	<link rel="stylesheet" asp-append-version="true" href="../patio.min.css" />
</head>
<body>
	<div class="container"><table class="code-table">
	<tr>
		<th>1</th>
		<td><span class="c-keyword">using</span> RPGCore.World;</td>
	</tr>
	<tr>
		<th>2</th>
		<td></td>
	</tr>
	<tr>
		<th>3</th>
		<td><span class="c-keyword">namespace</span> RPGCore.Documentation.Samples.EntityComponentSystemSample</td>
	</tr>
	<tr>
		<th>4</th>
		<td>{</td>
	</tr>
	<tr>
		<th>5</th>
		<td>    <span class="c-keyword">public</span> <span class="c-keyword">struct</span> <span class="c-structure">TransformComponent</span></td>
	</tr>
	<tr>
		<th>6</th>
		<td>    {</td>
	</tr>
	<tr>
		<th>7</th>
		<td>        <span class="c-keyword">public</span> <span class="c-keyword">int</span> <span class="c-field">X</span>;</td>
	</tr>
	<tr>
		<th>8</th>
		<td>        <span class="c-keyword">public</span> <span class="c-keyword">int</span> <span class="c-field">Y</span>;</td>
	</tr>
	<tr>
		<th>9</th>
		<td>    }</td>
	</tr>
	<tr>
		<th>10</th>
		<td></td>
	</tr>
	<tr>
		<th>11</th>
		<td>    <span class="c-keyword">public</span> <span class="c-keyword">struct</span> <span class="c-structure">UnitComponent</span></td>
	</tr>
	<tr>
		<th>12</th>
		<td>    {</td>
	</tr>
	<tr>
		<th>13</th>
		<td>        <span class="c-keyword">public</span> <span class="c-keyword">int</span> <span class="c-field">Type</span>;</td>
	</tr>
	<tr>
		<th>14</th>
		<td>    }</td>
	</tr>
	<tr>
		<th>15</th>
		<td></td>
	</tr>
	<tr>
		<th>16</th>
		<td>    <span class="c-keyword">public</span> <span class="c-keyword">class</span> <span class="c-class">EntityComponentSystemSample</span></td>
	</tr>
	<tr>
		<th>17</th>
		<td>    {</td>
	</tr>
	<tr>
		<th>18</th>
		<td>        <span class="c-keyword">public</span> <span class="c-keyword">static</span> <span class="c-keyword">void</span> <span class="c-method">Run</span>()</td>
	</tr>
	<tr>
		<th>19</th>
		<td>        {</td>
	</tr>
	<tr>
		<th>20</th>
		<td>            <span class="c-keyword">var</span> <span class="c-local">worldEngine</span> = <span class="c-keyword">new</span> <span class="c-class">WorldEngineFactory</span>()</td>
	</tr>
	<tr>
		<th>21</th>
		<td>                .UseEntity(<span class="c-string">"unit"</span>, <span class="c-parameter">options</span> <span class="c-method">=&gt;</span></td>
	</tr>
	<tr>
		<th>22</th>
		<td>                {</td>
	</tr>
	<tr>
		<th>23</th>
		<td>                    <span class="c-parameter">options</span>.AddComponent&lt;<span class="c-structure">TransformComponent</span>&gt;();</td>
	</tr>
	<tr>
		<th>24</th>
		<td>                    <span class="c-parameter">options</span>.AddComponent&lt;<span class="c-structure">UnitComponent</span>&gt;();</td>
	</tr>
	<tr>
		<th>25</th>
		<td>                })</td>
	</tr>
	<tr>
		<th>26</th>
		<td>                .<span class="c-method">Build</span>();</td>
	</tr>
	<tr>
		<th>27</th>
		<td></td>
	</tr>
	<tr>
		<th>28</th>
		<td>            <span class="c-keyword">var</span> <span class="c-local">world</span> = <span class="c-local">worldEngine</span>.<span class="c-method">ConstructWorld</span>();</td>
	</tr>
	<tr>
		<th>29</th>
		<td></td>
	</tr>
	<tr>
		<th>30</th>
		<td>            <span class="c-keyword">var</span> <span class="c-local">units</span> = <span class="c-local">world</span>.<span class="c-method">GetEntityPool</span>(<span class="c-string">"unit"</span>);</td>
	</tr>
	<tr>
		<th>31</th>
		<td></td>
	</tr>
	<tr>
		<th>32</th>
		<td>            <span class="c-keyword">int</span> <span class="c-local">newUnitId</span> = <span class="c-local">units</span>.<span class="c-method">New</span>();</td>
	</tr>
	<tr>
		<th>33</th>
		<td>            <span class="c-keyword">ref</span> <span class="c-keyword">var</span> <span class="c-local">newUnitTransform</span> = <span class="c-keyword">ref</span> <span class="c-local">units</span>.GetComponent&lt;<span class="c-structure">TransformComponent</span>&gt;(<span class="c-local">newUnitId</span>);</td>
	</tr>
	<tr>
		<th>34</th>
		<td>            <span class="c-local">newUnitTransform</span>.<span class="c-field">X</span> <span class="c-method">+=</span> <span class="c-numeric">1</span>;</td>
	</tr>
	<tr>
		<th>35</th>
		<td></td>
	</tr>
	<tr>
		<th>36</th>
		<td>            <span class="c-local">units</span>.<span class="c-method">Recycle</span>(<span class="c-local">newUnitId</span>);</td>
	</tr>
	<tr>
		<th>37</th>
		<td>        }</td>
	</tr>
	<tr>
		<th>38</th>
		<td>    }</td>
	</tr>
	<tr>
		<th>39</th>
		<td>}</td>
	</tr>
</table>
</div></body></html>